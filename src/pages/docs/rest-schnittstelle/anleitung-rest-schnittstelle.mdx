---
title: 'Datenguide | REST-Schnittstelle | Abfrage der REST-Schnittstelle'
layout: DocsPage
---

# Die Databfrage über die REST-Schnittstelle

Wer Daten nicht händisch über unser Datenportal[https://datengui.de/statistiken] herunterladen möchte, kann die Datensätze mit Hilfe der 
REST-Schnittstelle über die URL mit jeder Programmiersprache abfragen. Die Abfrage ist Programmiersprachen-agnostisch,
also komplett unabgängig von der genutzten Sprache. Den Code für Python gibt es auf dieser Seite[INTERNER_LINK],
den Code für den Datenabruf mit Javascript auf dieser Seite[[INTERNER_LINK].

## Die URL-Struktur für die Abfrage REST-Schnittstelle

*Wer bereits Erfahrung mit dem Abfragen von APIs hat, kann diesen Abschnitt überspringen. Die konkreten 
Abfrage-Parameter finden sich im  folgenden Absatz[INTERNER_LINK].

Hier sind einige Beispiele für die Anfrage per REST-URL:

https://tabular.genesapi.org/?data=12612:BEV001  
https://tabular.genesapi.org/?data=12612:BEV001&level=2  
https://tabular.genesapi.org/?data=12612:BEV001&level=2&time=2008:

Für die Abfrage der REST-Schnittstelle sind keine Programmierkenntnisse vonnöten. Jede dieser Browser-Adressen 
(URLs) ist anklickbar und stellt bereits eine separate Anfrage an die REST-Schnittstelle der Regionalstatistik 
dar. Der Browser genügt als "Werkzeug", um mit der Schnittstelle zu kommunizieren und Daten abzufragen. 

Die unterschiedliche Länge der Anfragen sich durch  das Anfügen unterschiedlicher Anhänge, sogenannter Parameter.
Damit die Anfrage funktioniert, müssen also alle notwendigen Informationen in 
die URL untergebracht werden. Dabei sind einige Bestandteile notwendig  für die Abfrage, andere jedoch nur 
optional. 

Man kann sich die URL-Abfrage wie einen Güterzug vorstellen.   

:steam_locomotive: https://gist.github.com/rxaviers/7360908

Die URL selbst stellt den Triebwagen dar, die Parameter, die daran angehängt werden, die Waggons. Wie der Zug 
Güter,  liefert die URL der REST-Schnittstelle Informationen über die Art der Anfrage. 
Je länger der "Zug", bzw. die URL, desto mehr Anhaltspunkte werden der  
der Schnittstelle geliefert und desto spezifischer ist das Ergebnis, der Datensatz. 

:steam_locomotive::train::train::train: 

Wie man die Parameter aneinander fügt, bzw. die einzelnen Waggons aneinander 
hängt, um beim Bild des Güterzugs zu bleiben, spielt keine Rolle für das Funktionieren der Abfrage. 
Wichtig ist allerdings wie bei den Waggons eines Güterzugs, die Parameter miteinander zu verknüpfen. 
Zwischen den einzelnen URL-Parametern sorgt das `&`-Symbol dafür, dass die REST-Schnittstelle die Anfrage als 
einheitlichen Anfrage Zeichenstrang interpretiert. 

`?data=12612:BEV001&level=2&time=2008:`

Der Übersicht wegen werden wir im Folgenden trotzdem eine bestimmte Reihenfolge der
Parameter einhalten, die dem schnellstmöglichen Verständnis des Abfrage-Aufbaus dient.

## Die Abfrage der REST-Schnittstelle über URL-Ergänzungen (Parameter)

Die URL-Struktur jeder Abfrage setzt sich aus unterschiedlichen Bestandteilen zusammen, wobei nur zwei 
davon absolut notwendig das Funktionieren des Datenabrufs sind:

##### [HIER EINGEFÄRBTE URL MIT ALLEN PARAMETERN?? ##### 

1. Die Basis-URL https://tabular.genesapi.org (notwendig)
2. Die Angabe des gesuchten Datensatzes mit `data=` (notwendig) 
3. Die Abfrage des gewünschten Gebiets mit `level=` und `region=` (optional)
4. Die Abfrage des Zeitraums mit `time= ` (optional)
5. Weiteren möglichen Parametern wie sDatenauswahl, Layout, Beschriftungen und Download-Format (optional)

Sämtliche an die REST-Schnittstelle gesendeten Abfragen folgen diesem Aufbau. Sehen wir uns weiter die 
Bestandteile der URL einmal genauer an.

1. Die Basis-URL (notwendig)

https://tabular.genesapi.org/

Die Anfrage an die REST-Schnittstelle geschieht über die URL-Anfrage an die Adresse https://tabular.genesapi.org/. 
Ohne das Hinzufügen weiterer Parameter wird die Seite zwar aufgerufen, liefert aber keinen  Datensatz zurück.

2. Die Angabe des gesuchten Datensatzes `?data=` (notwendig) 

Die Angabe des Datensatzes `?data=` ist der wichtigste Parameter der Abfrage, denn nur durch die Angabe des 
Datensatzes "weiß" die REST-Schnittstelle, welche spezifischen Daten abgefragt werden sollen. Leicht zu übersehen
und dennoch  notwendig für die Abfrage ist das hinter die Basis-URL gesetzte Fragezeichen `?`, das die REST-Schnittstelle 
wissen lässt, dass nun ein Datenabfrage (ein sogenannter request) erfolgen soll:

https://tabular.genesapi.org/?data=12612:BEV001

Wie in diesem Beispiel zu sehen, fügen wir den Namen des Datensatzes gleich hinter dem `data=`-Parameter an. Wie
in vielen Programmiersprachen steht das Gleichheitszeichen nicht für eine Gleichsetzung, sondern für eine 
Zuweisung. Anders gesagt, um der Schnittzustelle mitzuteilen, welcher Datensatz aufgerufen werden soll, weisen 
wir dem Parameter `?data` den Beispiel-Datensatz `11111:FLC006` über das Gleichheitzeichen zu: `data=11111:FLC006`.    

In der Datenbank steht `12612:BEV001` beispielsweise für den Datensatz "Lebend Geborene", der wiederum zur Oberkategorie 
"12612" (Statistik der Geburten) gehört. Die "Codes" der zur Verfügung stehenden Datensätze und Kategorien mit ihren leider nicht 
so eingängig wie erhofft, lassen sich jedoch einfach über unser Tool https://datengui.de/statistik-erklaert/dimensions 
über eine Suchmaske einfach nachschlagen.

3. Die Abfrage des gewünschten Gebiets `region=` (optional)

Mit der reinen Angabe des Datensatzes ist die Anfrage bereits erfolgreich, alle weiteren Angaben sind 
optional, erweitern oder verfeinern aber das Datensatz-Ergebnis. Der Parameter `region=` legt fest, über welches
Gebiet wir Daten abfragen möchten. Ausgewählt werden können folgende Gebiete:

`0 - Deutschland gesamt
 1 - Bundesländer
 2 - Regierungsbezirke / stat. Regionen
 3 - Landkreise und kreisfreie Städte
 4 - Gemeinden`

Um regionale Statistiken über Grenzen hinweg vergleichbar zu machen, wird in Europa bei der Gebietseinteilung 
ein System namens NUTS "(Nomenclature des unités territoriales statistiques") verwendet. Mehr Informationen über 
einschlägige Begriffe wie regionale Tiefe, NUTS oder LAU gibt es auf der Seite https://datengui.de/statistik-erklaert/nuts.

Am bereits vorgestellten Beispiel der Lebend Geborenen Kinder können wir die Region einschränken, wenn wir 
hinter den `data=` ein Fragezeichen `?` als Trenner zwischen Daten und Region setzen und dann den Parameter 
`level=` mit der entsprechende Zahl anfügen, zum Beispiel `1` für Deutschland gesamt.: 

https://tabular.genesapi.org/?data=12612:BEV001&level=0

## Unterschiedliche Parameter für die Abfrage von Landkreisen und kreisfreien Städten

Fragen wir, wie in oberen Beispiel, die Zahlen der Lebend Geborenden für ganz Deutschland mit `0` oder aber die 
Bundesländer mit `1` ab, ist die URL noch relativ kurz und übersichtlich. Ein wenig komplizierter wird es, 
wenn man den Landkreis mit abfragen möchte. Hier unterscheidet man zwischen dem Filter vom Landkreisen mit 
`level=3&parent=` und der  Auswahl eines einzigen Landkreis mit `region=`. Welcher 
Kreisschlüssel welcher Region zugeordnet ist, kann über https://de.wikipedia.org/wiki/Liste_der_Landkreise_in_Deutschland 
recherchiert werden.

### Das Filter von Landkreisen und kreisfreien Städte

Möchte man nicht nur einzelne Regionen auswählen, sondern nach den ersten drei Stellen des Kreisschlüssels eine
größere Auswahl von Regionen filtern, nutzt man am besten den Parameter `level=3&parent=` und fügt mindestens
die ersten zwei Ziffern des Kreisschüssels des Filters hinzu. In diesem Beispiel werden alle Regionen abgerufen,
deren Kreisschlüssel mit den Ziffern `01` beginnt: 

https://tabular.genesapi.org/?data=12612:BEV001&level=3&parent=01

# Einzelne Landkreise direkt auswählen

Möchte man Daten über einen einzelnen Landkreis oder eine einzige kreisfreie Stadt abrufen, gelingt das mit dem Parameter
`region=` und dem Anfügen des sogenannten Kreisschlüssels für den entsprechenden Landkreis oder die Stadt. Da für den Datenabruf nur die Landkreise entscheidend sind, kann der Parameter `level=` in der 
URL ausnahmsweise ganz wegfallen:

https://tabular.genesapi.org/?data=12612:BEV001&region=01051

4. Die Abfrage des Zeitraums mit `time=` (optional)

Neben den Daten über bestimmte Gebiete interessiert uns natürlich auch der Zeitraum, wann die Daten erhoben 
wurden. Mithilfe des Parameters `time=` lassen sich Abfrage-Zeiträume bestimmen, eingrenzen und auswählen.
Wird keine Zeitangabe gemacht, geht die REST-Schnittstelle davon aus, dass wir den gesamten Abfragezeitraum
abrufen möchten. Wie beim Anhängen aller vorherigen Parameter darf auch hier das `&` nicht vergessen werden.

`time=YEAR:YEAR` ruft einen Zeitraum zwischen Start und Endjahr auf. Ein Beispiel:

https://tabular.genesapi.org/?data=12612:BEV001&region=01051&time=2000:2010

`time=:YEAR` ruft sämtliche Jahre bis inklusive des ausgewählten Jahres auf:

https://tabular.genesapi.org/?data=12612:BEV001&region=01051&time=:2010

`time=YEAR:` ruft sämtliche Jahre ab dem ausgewählten Jahre auf (inklusive des Startjahres):

https://tabular.genesapi.org/?data=12612:BEV001&region=01051&time=2010:

`time=YEAR,YEAR` ruft mehrere Jahre auf:

https://tabular.genesapi.org/?data=12612:BEV001&region=01051&time=2000,2005,2010,2015

5. Weiteren möglichen URL-Bestandteilen wie spezifische Datenauswahl, Layout, Beschriftungen, 
und Download-Format (optional)

Die weiteren Parameter-Angaben sind zahlreich und sollen hier nur kurz vorgestellt werden:

Layout:  
`layout=long` Es wird eine Zeile pro Wert dargestellt (default)  
`layout=time` Es wird eine Zeile pro Jahr/Datum angezeigt
`layout=region` Es wird Eine Zeile pro Region dargestellt  

Beschriftungen:  
`labels=id` Statt der vollen Bezeichnung werden nur Kürzel ("ids") angezeigt (default)  
`labels=name` Ausgeschriebene Bezeichnungen bei der Ausgabe anzeigen

Format:  
`format=csv` Datensatz im CSV-Format ausgeben (default)  
`format=tsv` Daten im TSV-Format ausgeben (tabulatorgetrennt)  
`format=json` Daten im JSON-Format ausgeben (Ein Objekt pro Tabellenzeile plus Tabellen-Metadaten)
`delimiter=,` Als erwartetes Trennzeichen wird ein Komma `,` vernwedet (default), alternativ wäre ein Semikolon `;`    

Datumsformat:
`dformat=year` - Das Datumsformat wird in Jahren dargestellt (default)  
`dformat=date` - Das Datumsformat wird in Tagen dargestellt  

Viele Beispiele für mögliche Abfragen findet ihr auf [INTERNER_LINK]. Wenn du dauerhaft erreichbare Links 
erstellen willst, haben wir auf dieser Seite [INTERNER_LINK] ein Anleitung verfasst. Für den Python Code
geht es aus dieser Seite [INTERNER_LINK] weiter, für Javascript auf [INTERNER_LINK].